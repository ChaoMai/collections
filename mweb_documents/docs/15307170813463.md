# Design Data-Intensive Applications
# 可靠、可扩展、可维护的应用
## 数据密集型应用
现在的很多应用是*数据密集型*的，数据是这些应用的主要挑战-数据的总量、数据的复杂度和数据变化的速度。

很多数据密集型的应用都是基于已有的数据系统提供的常用功能来构建的。例如：

* 存储数据，以便自己或其他应用能够找到（基于数据库实现此功能）
* 记住一个昂贵操作的结果，来加速读取（缓存）
* 允许用户通过关键词搜索数据，或多种方式过滤数据（搜索索引）
* 发送消息到另一个进程进行异步处理（流式处理）
* 定时处理大量累积的数据（批处理）

由于数据系统的抽象，这些功能都看似很简单。但是，数据系统在逐渐变得相似，不同的数据系统可能同时具有多种特性，例如：Redis的cache和消息队列功能；应用程序越来越宽泛的需求使得单一数据系统无法完成，需要使用程序代码来组合不同的数据系统；同一需求，可能有多种方式和数据系统来实现。因此选择合适的数据系统和权衡架构的设计是一个值得思考的问题。

## 设计数据系统的原则
* 可靠性
    就算出现问题的时候（硬件或软件错误，人为错误），系统都应该应该持续的正确工作（在期望的水平上提供正确的功能）。
* 可扩展性
    随着系统的增长（数据量、流量或数据复杂度），应该有合理的方法来应对这些增长。
* 可维护性
    随着时间的推移，许多人都会参与系统相关的工作（开发和运维，他们保证系统现有行为正常、并使系统能够应对新的情况），他们应该高效的工作。

### 可靠性
系统具有容错性（fault-tolerant或resilient）。系统在遇到**特定错误的时候**，也能按预期正常工作。

> 这里原文特别区别了fault和failure。fault指的是系统组件的运作偏离了预期，而failure指的是系统整体无法提供服务。设计一个完全没有fault的系统是不可能的，但是可以通过设计fault-tolerant机制来避免fault导致failure。
> 下面，failure会写为系统故障。

1. 硬件故障
    每个硬件都有预期的寿命，系统使用的硬件规模够大、运行时间够长时，硬件总会出故障。
    
    通过软件和硬件层面冗余的方式，可以避免出现硬件故障时无法提供服务。 
2. 软件错误
    硬件错误的发生相对独立，但是软件错误难以预期，往往会导致很多的系统错误。
    
    通过完善的考虑系统的假设和交互、测试、进程隔离、监控、允许进程挂了后重启等方式来避免软件错误。
3. 人为错误
    系统的设计、构建和运维是由人来进行的，但人是不可靠的。

    通过如下方式来减少人为错误：
    * 以最小化错误机会的方式来设计系统。例如：设计良好的抽象、API和管理界面来避免“做错误的事”。
    * 解耦人们最容易犯的错和犯错的地方。例如：提供完整功能的非生产环境sanbox。
    * 完善的测试。例如：从单元测试到整个系统集成测试。
    * 提供快速和简单的错误恢复机制。例如：快速的回滚配置，上线新代码应逐步从小范围内到大范围，提供重新计算数据的工具来修复老数据错误。
    * 详尽和清晰的监控。例如：性能计数和错误率。

    ### 可扩展性
    