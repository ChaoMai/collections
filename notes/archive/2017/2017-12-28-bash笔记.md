# bash snips

## test

|           | desc| notes|
|-----------|-----|------|
| -e        | file exitst                                                                              ||
| -a        | file exists                                                                              | "deprecated"|
| -f        | This is identical in effect to -e. It has been "deprecated," and its use is discouraged. ||
| -s        | file is not zero size                                                                    ||
| -d        | file is a directory                                                                      ||
| -b        | file is a block device                                                                   ||
| -c        | file is a character device                                                               ||
| -p        | file is a pipe                                                                           ||
| -h        | file is a symbolic link                                                                  ||
| -L        | file is a symbolic link                                                                  ||
| -S        | file is a socket                                                                         ||
| -w        | file has read permission (for the user running the test)                                 ||
| -r        | file has write permission (for the user running the test)                                ||
| -x        | file has execute permission (for the user running the test)                              ||

## read mysql output to array

```bash

get_file_schema_enabled()
{
    export MYSQL_PWD=$mysql_write_pwd

    sql="
    select concat(access_key, '_', session_id)
    from data_manager_files_meta
    where has_schema = 1
    "

    ret_array=''
    while read line
    do
        ret_array+=$line,
    done < <($mysql_write -N -e "$sql")

    if [ $? -ne 0 ]
    then
        fatallog "error occors when get file schema enabled file from mysql"
        return $DB_ERROR
    fi

    echo ${ret_array[@]}
}

files=($(get_file_schema_enabled))
IFS=',' read -r -a f <<< "$files"

for idx in "${!f[@]}"
do
    echo ${f[idx]}
done
```


