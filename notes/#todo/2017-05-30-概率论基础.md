# 概率论基础

# 1. 事件的概率

## 1.1 事件的概率

* 古典概率定义：一个试验包含 N 个等可能的结果，事件 E 包含其中 M 个，则事件 E 的概率记为 $\Pr (E)$，定义 $\Pr (E) = M /N$。
* 公理化定义：基本事件集合 $\Omega = \{ \omega \mid \omega 是基本事件 \}$；定义事件 $\mathscr{E}$，一个事件由多个基本事件构成，即 $\mathscr{E} \subset \Omega$；定义事件集为 $\mathscr{F} = \{ \mathscr{e} \mid \mathscr{e} \subset  \Omega \} $；在 $\mathscr{F}$ 上定义函数 $P: \mathscr{F} \rightarrow \mathscr{R}$，其中 $\mathscr{R} = [0, 1]$，则 $\Pr (A)$ 为某一事件 $A \in \mathscr{F}$ 的概率，且 $\Pr (\Omega) = 1$，$\Pr (\emptyset) = 0$。


## 1.2 事件的运算

### 1.2.1 事件的蕴含、包含和相等

同一实验下的事件 A 和 B，若 A 发生时 B 必发生，则称 A 蕴含 B，或 B 包含 A，$A \subset B$。若 $A \subset B$，且 $B \subset A$，则 $B = A$。


### 1.2.2 事件的和、积与差

**互斥事件**：同一实验下不能同时发生。
**对立事件**：对于事件 A，对立事件 $\bar{A}$ 表示 A 不发生。

**事件的和**：对于事件 A、B，定义事件 C 为 A、B *至少发生一个*，记为 $C = A + B$。
**事件的积**：对于事件 A、B，定义事件 C 为 A、B *同时发生*，记为 $C = AB$。
**事件的差**：对于事件 A、B，定义事件 C 为 A*发生*、B *不发生*，记为 $C = A - B$。
乘法分配律和结合律适用。

对于若干个互斥事件，$A_1, A_2, \cdots$，$P(A_1 + A_2 + \cdots) = \Pr (A_1) + \Pr (A_2) + \cdots$。


### 1.2.3 条件概率、全概率公式和贝叶斯公式

**条件概率**：设两事件 A 和 B，且$\Pr (B) \neq 0$，则 $\Pr (A \mid B) = \frac{\Pr (AB)}{\Pr (B)} $。

若两事件 A 和 B 满足 $\Pr (AB) = \Pr (A) \Pr (B) $，则这两个事件相互独立。考虑使用 $\Pr (A) = \Pr (A \mid B) $ 来定义，但此式子受限于 $\Pr (B) \neq 0$。


**全概率公式**：设 $B_1, B_2, \cdots$ 为有限个或无限个事件，彼此两两互斥且每次实验中至少发生一个，即 $B_1 + B_2 + \cdots = \Omega$（必然事件）。这样一组事件也叫做“完备事件群”。

若有事件 A，则有 $A = A \Omega = A B_1 + A B_2 + \cdots$，又因为 $B_1, B_2, \cdots$ 彼此两两互斥，故 $A B_1, A B_2, \cdots$ 也彼此两两互斥。根据加法定理，以及条件概率公式，

$$
\begin{align*}
\Pr (A) & = \Pr (A B_1) + \Pr (A B_2) + \cdots \\
& = \underbrace{\Pr (B_1)}_{(1)} \underbrace{\Pr (A \mid B_1)}_{(2)} + \Pr (B_2) \Pr (A \mid B_2)+ \cdots
\end{align*}
$$

**全概率公式理解**：事件 $B_i$ 是事件 A 发生的不同途径（在 $B_i$ 条件下 A 才会发生，公式（2）处），采取哪个途径是随机的，每个途径的权重（概率，公式（1）处）不同，因此 $\Pr (A)$ 是 $\Pr (A \mid B_i)$ 的算数平均。

**贝叶斯公式**：在全概率的假定下，即 $B_1, B_2, \cdots$ 为有限个或无限个事件，彼此两两互斥且每次实验中至少发生一个，$B_1 + B_2 + \cdots = \Omega$（必然事件）。根据

$$
\Pr (AB) = \Pr (B) \Pr (A \mid B) \\
\Pr (AB) = \Pr (A) \Pr (B \mid A)
$$

有，

$$
\Pr (B \mid A) = \frac{\Pr (B) \Pr (A \mid B)}{\Pr (A)}
$$

带入 $\Pr (A)$ 全概率公式，对于任意的 $B_i$ 有，

$$
\Pr (B \mid A) = \frac{\Pr (B_i) \Pr (A \mid B_i)}{\Pr (A)} = \frac{\Pr (B_i) \Pr (A \mid B_i)}{\sum_{j}{\Pr (B_j) \Pr (A \mid B_j)}}
$$

**贝叶斯公式理解和示例**：

结合全概率公式，若事件 A 是结果，事件 $B_i$ 是起因，那么全概率公式是*已知各种原因 $B_i$*，推结果。而贝叶斯公式是，已知结果发生了，找出哪个起因最有可能导致结果发生。

> 1. 一所学校里面有 60% 的男生，40% 的女生。男生总是穿长裤，女生则一半穿长裤一半穿裙子。有了这些信息之后我们可以容易地计算“随机选取一个学生，他（她）穿长裤的概率和穿裙子的概率是多大”，这个就是前面说的“正向概率”的计算。然而，假设你走在校园中，迎面走来一个穿长裤的学生（很不幸的是你高度近似，你只看得见他（她）穿的是否长裤，而无法确定他（她）的性别），你能够推断出他（她）是男生的概率是多大吗？

$$
\begin{align*}
& \Pr (Boy) = 0.6 \\
& \Pr (Girl) = 0.4 \\
& \Pr (Pants \mid Boy) = 1 \\
& \Pr (Pants \mid Girl) = 0.5
\end{align*}
$$

根据贝叶斯公式可得，

$$
\begin{align*}
\Pr (Girl \mid Pants) & = \frac{\Pr (Girl) \Pr (Pants \mid Girl)}{\Pr (Girl) \Pr (Pants \mid Girl) + \Pr (Boy) \Pr (Pants \mid Boy)} \\
& = \frac{\Pr (Girl \cdot Pants)}{\Pr (Pants)}
\end{align*}
$$

最后一个式子其实就非常直观了，在穿长裤的人里面有多少穿长裤的女孩。

其他示例，
> * [数学之美番外篇：平凡而又神奇的贝叶斯方法](http://mindhacks.cn/2008/09/21/the-magical-bayesian-method/)
> * [How to Write a Spelling Corrector](http://norvig.com/spell-correct.html)


# 2. 随机变量和概率分布

## 2.1 离散型随机变量

### 2.1.1 离散型随机变量

**概率函数**：设 X 为离散型随机变量，$X = {a_1, a_2, \cdots}$，则 X 的概率函数为 $p_i = \Pr (X = a_i)$。
**概率质量函数（PFM）**：$p_i = \Pr (X = a_i)$。
**累积分布函数（CDF）**：又叫分布函数，函数 $\Pr (X \leq x) = F(x), -\infty < x < \infty$ 为 X 的分布函数。这是概率分布的*狭义*定义。

对于离散型随机变量有，其 CDF 有，

* $F(x) = \Pr (X \leq x) = \sum_{i: a_i <= x}{p_i}$
* $p_i = F(i) - F(i - 1)$

对于任意随机变量 X，其 CDF 有，

* 当 $x_1 < x_2$时，$F(x_1) \leq F(x_2)$
* 当 $x \rightarrow \infty$时，$F(x) \rightarrow 1$；当 $x \rightarrow -\infty$时，$F(x) \rightarrow 0$


### 2.1.2 离散型随机变量概率分布

下面列出常用的离散型概率分布，这是概率分布的*广义*定义（两个随机变量 X 和 Y 具有同样的分布（或同分布）时，我们是*无法用概率来区别*他们的）。

**均匀分布**：
**二项分布**：$X \sim b(n, p)$，随机一次试验出现的概率如果为 p，那么在 n 次试验中出现 k 次的概率由 PMF 给出：

$$
f(k; n, p) = \Pr (K = k) = {n \choose k} p^{k} (1-p)^{n-k} \\
对于k = 0, 1, 2, \cdots , n，其中 {n \choose k} = \frac {n!}{k!(n-k)!}
$$

CDF 为：
$$
F(x; n, p)= \Pr (X \leq x)= \sum_{i=0}^{\lfloor x \rfloor }{n \choose i} p^{i} (1-p)^{n-i}
$$

**伯努利分布**：二项分布 n = 1 时。

**几何分布**：以下两种离散型概率分布中的一种。在伯努利试验中，

* 得到一次成功所需要的试验次数 X。X 的值域是 $\{ 1, 2, 3, \cdots \}$。
    对于第 k 次实验，PMF 为：$\Pr (X = k) = (1 - p)^{k - 1} p$，CDF 为：$1 - (1 - p)^{k}$
* 在得到第一次成功之前所经历的失败次数 Y = X − 1。
    对于第 k 次失败的实验，PMF 为：$\Pr (Y = k) = (1 - p)^{k} p$，CDF 为：$1 - (1 - p)^{k + 1}$


## 2.2 连续型随机变量

### 2.1.1 连续型随机变量

**概率函数**：一个连续型随机变量，可能的取值范围是一个*区间*，值的个数为*无数个*，描述取某个值的概率无意义，$\Pr (X = x) = 0$，但 X = x *不是*不可能事件。
**累积分布函数（CDF）**：函数 $\Pr (X \leq x) = F(x), -\infty < x < \infty$ 为 X 的分布函数。
**概率密度函数（PDF）**：$f(x) = F^{\prime }(x)$。

每个概率密度函数都有，

* $\int_{-\infty}^{\infty}f(x){\rm {d}}x=1$
* $\int_{a}^{b} f(x){\rm {d}}x = \Pr (a\leq X \leq b) = F(b) - F(a)$

### 2.1.2 连续型随机变量概率分布

**均匀分布**：一个均匀分布在区间 [a, b] 上的连续型随机变量 X，

PDF：

$$
f(x) = \left \{
{\begin{matrix}
{\frac  {1}{b-a}} & \ \ \ {\mbox{for }}a\leq x\leq b\\
0 & {\mbox{elsewhere}}
\end{matrix}}
\right.
$$

CDF：

$$
F(x) = \left \{
{\begin{matrix}
0 & {\mbox{for }} x < a \\
{\frac{x - a}{b - a}} &\ \ \ {\mbox{for }} a \leq x < b \\
1 & {\mbox{for }} x \geq b
\end{matrix}}
\right.
$$


